# User Manual for epicR

The purpose of this package is to create documentation for the `epicR` package. To view the documentation on GitHub Pages, got to: https://resplab.github.io/epicManual/

# Editing the Documentation

If you want to compile the BookDown yourself/add new documentation, you can download this package in R:

```
devtools::install_github("resplab/epicManual.git")
```
Once you have downloaded the package, you need to set the working directory to the package folder. For example, if I installed the `epicManual` package in my `Coding` folder, I would change the directory as follows:

```
setwd("~/Coding/epicManual")
```
Once you have made the changes you want, you can recompile the BookDown files as follows:

```
bookdown::render_book("1-epic.Rmd", "bookdown::gitbook", output_dir="docs")
```

The output_dir must be "docs" in order to work with Github Pages. Also, the `index.html` file is necessary for GitHub Pages.

## Use of HTML in BookDown

In the Rmd files, you will see code chunks that incorporate raw HTML. For example, in `3-package-in-r.Rmd`:

```
library(htmltools)
rawHTML <- paste(readLines("html/section-3/extended-results-cardio.html"), collapse="\n")
HTML(rawHTML)
```

Basically this allows me to write some parts in HTML/CSS/Javascript, and BookDown will incorporate it inline. All the `.html` files are in the `html` folder, which is divided into folders for each Section (each Rmd file is a section).

## CSS Files

The CSS files are in the `css` folder. The BookDown package comes with its own set of CSS files, but I added some of my own to incorporate Bootstrap elements, etc. Most of the CSS used is in `main-bookdown-styles.css`. The `python.css` file contains some additional styling for Python code highlighting in code chunks. The `shadow.css` file contains styles for the Shadow DOM elements. 

## Creating HTML Elements from ROxygen

If you go to: https://resplab.github.io/epicManual/section-packageinR.html#section-exacerbation-charts, you will find an interactive table describing the arguments for the plotExacerbations function in `epicR`. To streamline the documentation, I decided to reuse this component. I wanted to be able to take the documentation generated by ROxygen2 in the `epicR` app, and convert that into one of these tables. To do this, I made a copy of the `man` folder from `epicR` and added it to the `epicBookDown` package. This folder contains all the ROxygen `.Rd` files from `epicR`. 

In the file `R/readArguments.R`, you can call the function `getItemizeDocs`. This function will read through the `man` folder and find the function you want to document. It will then create a table component as an `.html` file, and add this new file to the `html` folder in the appropriate section. 

An example of the `getItemizeDocs()` function:

```
library(htmltools)
source("R/readArguments.R")
getItemizeDocs("plotExacerbations", section = 3)
rawHTML <- paste(readLines("html/section-3/plotExacerbations-arguments.html"), collapse="\n")
HTML(rawHTML)
```